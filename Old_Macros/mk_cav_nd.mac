!  eases the generation of pressure cavity
/NOPR
/prep7
/PMACRO
PARSAV
*GET,NUM_ND,NODE,,COUNT
*DO,LOOP,1,10,
CM,START_,node
*ASK,CAVNUM,CAVITY NUMBER TO CREATE (ZERO TO EXIT),0
*IF,CAVNUM,EQ,0,*EXIT
cmsel,u,CAV%CAVNUM%
nplo
nsel,R,P
!*GET,N_nd,node,,COUNT
!*IF,N_nd,EQ,NUM_nd,*CYCLE
*GET,CHECK,COMP,CAV%CAVNUM%,TYPE
*IF,CHECK,GT,0,THEN
CMSEL,A,CAV%CAVNUM%
*ENDIF
CM,CAV%CAVNUM%,node
!LATT,CAVNUM
!KPLS
!CM,KPS_,KP
CMSEL,,START_
cmsel,u,CAV%CAVNUM%
nplo
*ENDDO
CMDELE,START_
PARRES

/GOPR
